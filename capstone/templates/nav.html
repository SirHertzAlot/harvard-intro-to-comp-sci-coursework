{# templates/nav.html #}
{% set active_page = "index" %}

{% set session_links = [
    ('/', 'index', 'Index'),
    ('/profile', 'profile', 'Profile'),
    ('/logout', 'logout', 'Log out')
    ] -%}

{% set no_session_links = [
    ('/login', 'login', 'Log in'),
    ('/register', 'register', 'Register'),
    ] -%}

    <nav class="bg-light border navbar navbar-expand-md navbar-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"><span class="blue">Mem</span><span class="red">o</span><span class="yellow">ries</span></a>
            <button aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbar" data-bs-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar">
                {% if session["user_id"] %}
                    <ul class="navbar-nav me-auto mt-2">
                        {% for href, id, caption in session_links %}
                        <li class="nav-item"><a class="nav-link" href="{{ href|e }}">{{ caption|e }}</a></li>
                        {% endfor %}
                    </ul>
                    <ul class="navbar-nav ms-auto mt-2">
                        <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                        <li class="nav-item"><a class="nav-link" href="/update">Update Password</a></li>
                    </ul>
                {% else %}
                    <ul class="navbar-nav ms-auto mt-2">
                        {% for href, id, caption in no_session_links %}
                        <li class="nav-item"><a class="nav-link" href="{{ href|e }}">{{ caption|e }}</a></li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>
        </div>
    </nav>
